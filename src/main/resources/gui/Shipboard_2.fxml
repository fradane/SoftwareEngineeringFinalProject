<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.net.*?>
<?import javafx.collections.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>

<BorderPane fx:id="borderPane" minWidth="-Infinity" prefHeight="700.0" prefWidth="1200.0" styleClass="game-background" xmlns="http://javafx.com/javafx/17.0.12" xmlns:fx="http://javafx.com/fxml/1" fx:controller="it.polimi.ingsw.is25am33.client.view.gui.viewControllers.ShipBoardViewController">
    <stylesheets>
        <URL value="@/galaxy-truckers.css" />
    </stylesheets>

    <top>
        <VBox spacing="10.0" styleClass="top-container">
            <HBox alignment="CENTER_RIGHT" spacing="10">
                <Label styleClass="screen-title" text="Galaxy Truckers" />
                <Region HBox.hgrow="ALWAYS" />
                <Button fx:id="goBackButton" onAction="#handleGoBackButton" styleClass="nav-button" text="Go Back" />
            </HBox>

            <VBox alignment="CENTER_LEFT" spacing="5" styleClass="timer-container">
                <HBox>
                    <Label fx:id="timerLabel" styleClass="timer-label" />
                    <Button fx:id="flipHourglassButton" minHeight="-Infinity" minWidth="-Infinity" onAction="#handleFlipHourglassButton" styleClass="action-button" text="Flip Hourglass" />
                </HBox>
                <Label fx:id="flipsLeftLabel" styleClass="timer-label" />
                <VBox.margin>
                    <Insets left="20.0" />
                </VBox.margin>
            </VBox>

            <!-- Barra di navigazione delle navi -->
            <HBox fx:id="shipNavigationBar" alignment="CENTER" spacing="10.0" styleClass="ship-navigation">
                <Button fx:id="myShipButton" onAction="#handleMyShipBoardButton" styleClass="ship-nav-button, active" text="My Ship" />
                <!-- Questi pulsanti verranno generati dinamicamente in base al numero di giocatori -->
            </HBox>
        </VBox>
    </top>

    <left>
        <!-- Pannello sinistro per componenti visibili -->
        <VBox fx:id="visibleComponentsPanel" maxWidth="300" minWidth="250" styleClass="component-controls">
            <HBox alignment="CENTER" spacing="10.0" styleClass="component-controls">
                <Label styleClass="component-controls" text="Visible Components" />
            </HBox>

            <ScrollPane fx:id="componentsScrollPane" fitToWidth="true" styleClass="component-controls" VBox.vgrow="ALWAYS">
                <VBox fx:id="componentsContainer" alignment="TOP_CENTER" styleClass="component-controls">
                    <padding>
                        <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                    </padding>
                    <!-- I componenti visibili verranno aggiunti qui dinamicamente -->
                </VBox>
            </ScrollPane>
        </VBox>
    </left>

    <center>
        <StackPane>
            <StackPane fx:id="stackPane" styleClass="board-container">
                <!-- Main Player's Shipboard (with buttons for interaction) -->
                <StackPane fx:id="mainPlayerShipBoard">
                    <ImageView fx:id="shipboard" fitHeight="600.0" fitWidth="600.0" preserveRatio="true" StackPane.alignment="CENTER">
                        <Image url="@graphics/shipboard_2.jpg" />
                        <StackPane.margin>
                            <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                        </StackPane.margin>
                    </ImageView>

                    <GridPane fx:id="grid" alignment="BOTTOM_LEFT" hgap="1.0" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="393.0" prefWidth="555.0" vgap="1.0">
                        <columnConstraints>
                            <ColumnConstraints percentWidth="14.2857" />
                            <ColumnConstraints percentWidth="14.2857" />
                            <ColumnConstraints percentWidth="14.2857" />
                            <ColumnConstraints percentWidth="14.2857" />
                            <ColumnConstraints percentWidth="14.2857" />
                            <ColumnConstraints percentWidth="14.2857" />
                            <ColumnConstraints minWidth="-Infinity" percentWidth="14.2857" />
                        </columnConstraints>
                        <rowConstraints>
                            <RowConstraints percentHeight="20" />
                            <RowConstraints percentHeight="20" />
                            <RowConstraints percentHeight="20" />
                            <RowConstraints percentHeight="20" />
                            <RowConstraints percentHeight="20" />
                        </rowConstraints>

                        <!-- Prima riga -->
                        <Button fx:id="button04_03" maxHeight="Infinity" maxWidth="Infinity" styleClass="cell-button" GridPane.columnIndex="0" GridPane.hgrow="ALWAYS" GridPane.rowIndex="0" GridPane.vgrow="ALWAYS" />
                        <Button fx:id="button04_04" maxHeight="Infinity" maxWidth="Infinity" styleClass="cell-button" GridPane.columnIndex="1" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="0" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS" />
                        <Button fx:id="button04_05" maxHeight="Infinity" maxWidth="Infinity" onAction="#handleGridButtonClick" styleClass="cell-button" GridPane.columnIndex="2" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="0" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS" />
                        <Button fx:id="button04_06" maxHeight="Infinity" maxWidth="Infinity" styleClass="cell-button" GridPane.columnIndex="3" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="0" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS" />
                        <Button fx:id="button04_07" maxHeight="Infinity" maxWidth="Infinity" onAction="#handleGridButtonClick" styleClass="cell-button" GridPane.columnIndex="4" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="0" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS" />
                        <Button fx:id="button04_08" maxHeight="Infinity" maxWidth="Infinity" onAction="#handleGridButtonClick" styleClass="cell-button" GridPane.columnIndex="5" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="0" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS" />
                        <Button fx:id="button04_09" maxHeight="Infinity" maxWidth="Infinity" onAction="#handleGridButtonClick" styleClass="cell-button" GridPane.columnIndex="6" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="0" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS" />

                        <!-- Seconda riga -->
                        <Button fx:id="button05_03" maxHeight="Infinity" maxWidth="Infinity" styleClass="cell-button" GridPane.columnIndex="0" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="1" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS" />
                        <Button fx:id="button05_04" maxHeight="Infinity" maxWidth="Infinity" onAction="#handleGridButtonClick" styleClass="cell-button" GridPane.columnIndex="1" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="1" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS" />
                        <Button fx:id="button05_05" maxHeight="Infinity" maxWidth="Infinity" onAction="#handleGridButtonClick" styleClass="cell-button" GridPane.columnIndex="2" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="1" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS" />
                        <Button fx:id="button05_06" maxHeight="Infinity" maxWidth="Infinity" onAction="#handleGridButtonClick" styleClass="cell-button" GridPane.columnIndex="3" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="1" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS" />
                        <Button fx:id="button05_07" maxHeight="Infinity" maxWidth="Infinity" onAction="#handleGridButtonClick" styleClass="cell-button" GridPane.columnIndex="4" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="1" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS" />
                        <Button fx:id="button05_08" maxHeight="Infinity" maxWidth="Infinity" onAction="#handleGridButtonClick" styleClass="cell-button" GridPane.columnIndex="5" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="1" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS" />
                        <Button fx:id="button05_09" maxHeight="Infinity" maxWidth="Infinity" styleClass="cell-button" GridPane.columnIndex="6" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="1" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS" />

                        <!-- Terza riga -->
                        <Button fx:id="button06_03" maxHeight="Infinity" maxWidth="Infinity" onAction="#handleGridButtonClick" styleClass="cell-button" GridPane.columnIndex="0" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="2" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS" />
                        <Button fx:id="button06_04" maxHeight="Infinity" maxWidth="Infinity" onAction="#handleGridButtonClick" styleClass="cell-button" GridPane.columnIndex="1" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="2" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS" />
                        <Button fx:id="button06_05" maxHeight="Infinity" maxWidth="Infinity" onAction="#handleGridButtonClick" styleClass="cell-button" GridPane.columnIndex="2" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="2" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS" />
                        <Button fx:id="button06_06" maxHeight="Infinity" maxWidth="Infinity" onAction="#handleGridButtonClick" styleClass="cell-button" GridPane.columnIndex="3" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="2" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS" />
                        <Button fx:id="button06_07" maxHeight="Infinity" maxWidth="Infinity" onAction="#handleGridButtonClick" styleClass="cell-button" GridPane.columnIndex="4" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="2" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS" />
                        <Button fx:id="button06_08" maxHeight="Infinity" maxWidth="Infinity" onAction="#handleGridButtonClick" styleClass="cell-button" GridPane.columnIndex="5" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="2" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS" />
                        <Button fx:id="button06_09" maxHeight="Infinity" maxWidth="Infinity" onAction="#handleGridButtonClick" styleClass="cell-button" GridPane.columnIndex="6" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="2" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS" />

                        <!-- Quarta riga -->
                        <Button fx:id="button07_03" maxHeight="Infinity" maxWidth="Infinity" onAction="#handleGridButtonClick" styleClass="cell-button" GridPane.columnIndex="0" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="3" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS" />
                        <Button fx:id="button07_04" maxHeight="Infinity" maxWidth="Infinity" onAction="#handleGridButtonClick" styleClass="cell-button" GridPane.columnIndex="1" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="3" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS" />
                        <Button fx:id="button07_05" maxHeight="Infinity" maxWidth="Infinity" onAction="#handleGridButtonClick" styleClass="cell-button" GridPane.columnIndex="2" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="3" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS" />
                        <Button fx:id="button07_06" maxHeight="Infinity" maxWidth="Infinity" onAction="#handleGridButtonClick" styleClass="cell-button" GridPane.columnIndex="3" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="3" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS" />
                        <Button fx:id="button07_07" maxHeight="Infinity" maxWidth="Infinity" onAction="#handleGridButtonClick" styleClass="cell-button" GridPane.columnIndex="4" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="3" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS" />
                        <Button fx:id="button07_08" maxHeight="Infinity" maxWidth="Infinity" onAction="#handleGridButtonClick" styleClass="cell-button" GridPane.columnIndex="5" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="3" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS" />
                        <Button fx:id="button07_09" maxHeight="Infinity" maxWidth="Infinity" onAction="#handleGridButtonClick" styleClass="cell-button" GridPane.columnIndex="6" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="3" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS" />

                        <!-- Quinta riga -->
                        <Button fx:id="button08_03" maxHeight="Infinity" maxWidth="Infinity" onAction="#handleGridButtonClick" styleClass="cell-button" GridPane.columnIndex="0" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="4" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS" />
                        <Button fx:id="button08_04" maxHeight="Infinity" maxWidth="Infinity" onAction="#handleGridButtonClick" styleClass="cell-button" GridPane.columnIndex="1" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="4" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS" />
                        <Button fx:id="button08_05" maxHeight="Infinity" maxWidth="Infinity" onAction="#handleGridButtonClick" styleClass="cell-button" GridPane.columnIndex="2" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="4" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS" />
                        <Button fx:id="button08_06" maxHeight="Infinity" maxWidth="Infinity" styleClass="cell-button" GridPane.columnIndex="3" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="4" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS" />
                        <Button fx:id="button08_07" maxHeight="Infinity" maxWidth="Infinity" onAction="#handleGridButtonClick" styleClass="cell-button" GridPane.columnIndex="4" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="4" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS" />
                        <Button fx:id="button08_08" maxHeight="Infinity" maxWidth="Infinity" onAction="#handleGridButtonClick" styleClass="cell-button" GridPane.columnIndex="5" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="4" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS" />
                        <Button fx:id="button08_09" maxHeight="Infinity" maxWidth="Infinity" onAction="#handleGridButtonClick" styleClass="cell-button" GridPane.columnIndex="6" GridPane.halignment="CENTER" GridPane.hgrow="ALWAYS" GridPane.rowIndex="4" GridPane.valignment="CENTER" GridPane.vgrow="ALWAYS" />

                        <StackPane.margin>
                            <Insets bottom="103.0" left="1.0" right="1.0" top="103.0" />
                        </StackPane.margin>
                    </GridPane>
                </StackPane>

                <!-- Player 2's Shipboard -->
                <StackPane fx:id="player2ShipBoard" visible="false">
                    <ImageView fitHeight="600.0" fitWidth="600.0" preserveRatio="true" StackPane.alignment="CENTER">
                        <Image url="@graphics/shipboard_2.jpg" />
                        <StackPane.margin>
                            <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                        </StackPane.margin>
                    </ImageView>

                    <GridPane fx:id="player2Grid" alignment="BOTTOM_LEFT" hgap="1.0" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="393.0" prefWidth="555.0" vgap="1.0">
                        <columnConstraints>
                            <ColumnConstraints percentWidth="14.2857" />
                            <ColumnConstraints percentWidth="14.2857" />
                            <ColumnConstraints percentWidth="14.2857" />
                            <ColumnConstraints percentWidth="14.2857" />
                            <ColumnConstraints percentWidth="14.2857" />
                            <ColumnConstraints percentWidth="14.2857" />
                            <ColumnConstraints minWidth="-Infinity" percentWidth="14.2857" />
                        </columnConstraints>
                        <rowConstraints>
                            <RowConstraints percentHeight="20" />
                            <RowConstraints percentHeight="20" />
                            <RowConstraints percentHeight="20" />
                            <RowConstraints percentHeight="20" />
                            <RowConstraints percentHeight="20" />
                        </rowConstraints>

                        <!-- We use ImageViews for other players' boards -->
                        <!-- First row -->
                        <ImageView fx:id="p2_img04_03" GridPane.columnIndex="0" GridPane.rowIndex="0" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p2_img04_04" GridPane.columnIndex="1" GridPane.rowIndex="0" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p2_img04_05" GridPane.columnIndex="2" GridPane.rowIndex="0" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p2_img04_06" GridPane.columnIndex="3" GridPane.rowIndex="0" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p2_img04_07" GridPane.columnIndex="4" GridPane.rowIndex="0" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p2_img04_08" GridPane.columnIndex="5" GridPane.rowIndex="0" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p2_img04_09" GridPane.columnIndex="6" GridPane.rowIndex="0" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />

                        <!-- Second row -->
                        <ImageView fx:id="p2_img05_03" GridPane.columnIndex="0" GridPane.rowIndex="1" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p2_img05_04" GridPane.columnIndex="1" GridPane.rowIndex="1" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p2_img05_05" GridPane.columnIndex="2" GridPane.rowIndex="1" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p2_img05_06" GridPane.columnIndex="3" GridPane.rowIndex="1" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p2_img05_07" GridPane.columnIndex="4" GridPane.rowIndex="1" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p2_img05_08" GridPane.columnIndex="5" GridPane.rowIndex="1" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p2_img05_09" GridPane.columnIndex="6" GridPane.rowIndex="1" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />

                        <!-- Third row -->
                        <ImageView fx:id="p2_img06_03" GridPane.columnIndex="0" GridPane.rowIndex="2" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p2_img06_04" GridPane.columnIndex="1" GridPane.rowIndex="2" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p2_img06_05" GridPane.columnIndex="2" GridPane.rowIndex="2" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p2_img06_06" GridPane.columnIndex="3" GridPane.rowIndex="2" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p2_img06_07" GridPane.columnIndex="4" GridPane.rowIndex="2" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p2_img06_08" GridPane.columnIndex="5" GridPane.rowIndex="2" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p2_img06_09" GridPane.columnIndex="6" GridPane.rowIndex="2" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />

                        <!-- Fourth row -->
                        <ImageView fx:id="p2_img07_03" GridPane.columnIndex="0" GridPane.rowIndex="3" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p2_img07_04" GridPane.columnIndex="1" GridPane.rowIndex="3" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p2_img07_05" GridPane.columnIndex="2" GridPane.rowIndex="3" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p2_img07_06" GridPane.columnIndex="3" GridPane.rowIndex="3" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p2_img07_07" GridPane.columnIndex="4" GridPane.rowIndex="3" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p2_img07_08" GridPane.columnIndex="5" GridPane.rowIndex="3" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p2_img07_09" GridPane.columnIndex="6" GridPane.rowIndex="3" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />

                        <!-- Fifth row -->
                        <ImageView fx:id="p2_img08_03" GridPane.columnIndex="0" GridPane.rowIndex="4" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p2_img08_04" GridPane.columnIndex="1" GridPane.rowIndex="4" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p2_img08_05" GridPane.columnIndex="2" GridPane.rowIndex="4" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p2_img08_06" GridPane.columnIndex="3" GridPane.rowIndex="4" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p2_img08_07" GridPane.columnIndex="4" GridPane.rowIndex="4" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p2_img08_08" GridPane.columnIndex="5" GridPane.rowIndex="4" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p2_img08_09" GridPane.columnIndex="6" GridPane.rowIndex="4" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />

                        <StackPane.margin>
                            <Insets bottom="103.0" left="1.0" right="1.0" top="103.0" />
                        </StackPane.margin>
                    </GridPane>
                </StackPane>

                <!-- Player 3's Shipboard -->
                <StackPane fx:id="player3ShipBoard" visible="false">
                    <ImageView fitHeight="600.0" fitWidth="600.0" preserveRatio="true" StackPane.alignment="CENTER">
                        <Image url="@graphics/shipboard_2.jpg" />
                        <StackPane.margin>
                            <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                        </StackPane.margin>
                    </ImageView>

                    <GridPane fx:id="player3Grid" alignment="BOTTOM_LEFT" hgap="1.0" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="393.0" prefWidth="555.0" vgap="1.0">
                        <columnConstraints>
                            <ColumnConstraints percentWidth="14.2857" />
                            <ColumnConstraints percentWidth="14.2857" />
                            <ColumnConstraints percentWidth="14.2857" />
                            <ColumnConstraints percentWidth="14.2857" />
                            <ColumnConstraints percentWidth="14.2857" />
                            <ColumnConstraints percentWidth="14.2857" />
                            <ColumnConstraints minWidth="-Infinity" percentWidth="14.2857" />
                        </columnConstraints>
                        <rowConstraints>
                            <RowConstraints percentHeight="20" />
                            <RowConstraints percentHeight="20" />
                            <RowConstraints percentHeight="20" />
                            <RowConstraints percentHeight="20" />
                            <RowConstraints percentHeight="20" />
                        </rowConstraints>

                        <!-- First row -->
                        <ImageView fx:id="p3_img04_03" GridPane.columnIndex="0" GridPane.rowIndex="0" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p3_img04_04" GridPane.columnIndex="1" GridPane.rowIndex="0" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p3_img04_05" GridPane.columnIndex="2" GridPane.rowIndex="0" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p3_img04_06" GridPane.columnIndex="3" GridPane.rowIndex="0" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p3_img04_07" GridPane.columnIndex="4" GridPane.rowIndex="0" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p3_img04_08" GridPane.columnIndex="5" GridPane.rowIndex="0" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p3_img04_09" GridPane.columnIndex="6" GridPane.rowIndex="0" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />

                        <!-- Second row -->
                        <ImageView fx:id="p3_img05_03" GridPane.columnIndex="0" GridPane.rowIndex="1" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p3_img05_04" GridPane.columnIndex="1" GridPane.rowIndex="1" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p3_img05_05" GridPane.columnIndex="2" GridPane.rowIndex="1" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p3_img05_06" GridPane.columnIndex="3" GridPane.rowIndex="1" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p3_img05_07" GridPane.columnIndex="4" GridPane.rowIndex="1" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p3_img05_08" GridPane.columnIndex="5" GridPane.rowIndex="1" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p3_img05_09" GridPane.columnIndex="6" GridPane.rowIndex="1" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />

                        <!-- Third row -->
                        <ImageView fx:id="p3_img06_03" GridPane.columnIndex="0" GridPane.rowIndex="2" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p3_img06_04" GridPane.columnIndex="1" GridPane.rowIndex="2" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p3_img06_05" GridPane.columnIndex="2" GridPane.rowIndex="2" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p3_img06_06" GridPane.columnIndex="3" GridPane.rowIndex="2" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p3_img06_07" GridPane.columnIndex="4" GridPane.rowIndex="2" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p3_img06_08" GridPane.columnIndex="5" GridPane.rowIndex="2" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p3_img06_09" GridPane.columnIndex="6" GridPane.rowIndex="2" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />

                        <!-- Fourth row -->
                        <ImageView fx:id="p3_img07_03" GridPane.columnIndex="0" GridPane.rowIndex="3" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p3_img07_04" GridPane.columnIndex="1" GridPane.rowIndex="3" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p3_img07_05" GridPane.columnIndex="2" GridPane.rowIndex="3" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p3_img07_06" GridPane.columnIndex="3" GridPane.rowIndex="3" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p3_img07_07" GridPane.columnIndex="4" GridPane.rowIndex="3" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p3_img07_08" GridPane.columnIndex="5" GridPane.rowIndex="3" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p3_img07_09" GridPane.columnIndex="6" GridPane.rowIndex="3" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />

                        <!-- Fifth row -->
                        <ImageView fx:id="p3_img08_03" GridPane.columnIndex="0" GridPane.rowIndex="4" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p3_img08_04" GridPane.columnIndex="1" GridPane.rowIndex="4" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p3_img08_05" GridPane.columnIndex="2" GridPane.rowIndex="4" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p3_img08_06" GridPane.columnIndex="3" GridPane.rowIndex="4" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p3_img08_07" GridPane.columnIndex="4" GridPane.rowIndex="4" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p3_img08_08" GridPane.columnIndex="5" GridPane.rowIndex="4" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p3_img08_09" GridPane.columnIndex="6" GridPane.rowIndex="4" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />

                        <StackPane.margin>
                            <Insets bottom="103.0" left="1.0" right="1.0" top="103.0" />
                        </StackPane.margin>
                    </GridPane>
                </StackPane>

                <!-- Player 4's Shipboard -->
                <StackPane fx:id="player4ShipBoard" visible="false">
                    <ImageView fitHeight="600.0" fitWidth="600.0" preserveRatio="true" StackPane.alignment="CENTER">
                        <Image url="@graphics/shipboard_2.jpg" />
                        <StackPane.margin>
                            <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                        </StackPane.margin>
                    </ImageView>

                    <GridPane fx:id="player4Grid" alignment="BOTTOM_LEFT" hgap="1.0" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="393.0" prefWidth="555.0" vgap="1.0">
                        <columnConstraints>
                            <ColumnConstraints percentWidth="14.2857" />
                            <ColumnConstraints percentWidth="14.2857" />
                            <ColumnConstraints percentWidth="14.2857" />
                            <ColumnConstraints percentWidth="14.2857" />
                            <ColumnConstraints percentWidth="14.2857" />
                            <ColumnConstraints percentWidth="14.2857" />
                            <ColumnConstraints minWidth="-Infinity" percentWidth="14.2857" />
                        </columnConstraints>
                        <rowConstraints>
                            <RowConstraints percentHeight="20" />
                            <RowConstraints percentHeight="20" />
                            <RowConstraints percentHeight="20" />
                            <RowConstraints percentHeight="20" />
                            <RowConstraints percentHeight="20" />
                        </rowConstraints>

                        <!-- First row -->
                        <ImageView fx:id="p4_img04_03" GridPane.columnIndex="0" GridPane.rowIndex="0" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p4_img04_04" GridPane.columnIndex="1" GridPane.rowIndex="0" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p4_img04_05" GridPane.columnIndex="2" GridPane.rowIndex="0" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p4_img04_06" GridPane.columnIndex="3" GridPane.rowIndex="0" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p4_img04_07" GridPane.columnIndex="4" GridPane.rowIndex="0" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p4_img04_08" GridPane.columnIndex="5" GridPane.rowIndex="0" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p4_img04_09" GridPane.columnIndex="6" GridPane.rowIndex="0" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />

                        <!-- Second row -->
                        <ImageView fx:id="p4_img05_03" GridPane.columnIndex="0" GridPane.rowIndex="1" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p4_img05_04" GridPane.columnIndex="1" GridPane.rowIndex="1" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p4_img05_05" GridPane.columnIndex="2" GridPane.rowIndex="1" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p4_img05_06" GridPane.columnIndex="3" GridPane.rowIndex="1" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p4_img05_07" GridPane.columnIndex="4" GridPane.rowIndex="1" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p4_img05_08" GridPane.columnIndex="5" GridPane.rowIndex="1" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p4_img05_09" GridPane.columnIndex="6" GridPane.rowIndex="1" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />

                        <!-- Third row -->
                        <ImageView fx:id="p4_img06_03" GridPane.columnIndex="0" GridPane.rowIndex="2" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p4_img06_04" GridPane.columnIndex="1" GridPane.rowIndex="2" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p4_img06_05" GridPane.columnIndex="2" GridPane.rowIndex="2" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p4_img06_06" GridPane.columnIndex="3" GridPane.rowIndex="2" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p4_img06_07" GridPane.columnIndex="4" GridPane.rowIndex="2" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p4_img06_08" GridPane.columnIndex="5" GridPane.rowIndex="2" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p4_img06_09" GridPane.columnIndex="6" GridPane.rowIndex="2" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />

                        <!-- Fourth row -->
                        <ImageView fx:id="p4_img07_03" GridPane.columnIndex="0" GridPane.rowIndex="3" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p4_img07_04" GridPane.columnIndex="1" GridPane.rowIndex="3" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p4_img07_05" GridPane.columnIndex="2" GridPane.rowIndex="3" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p4_img07_06" GridPane.columnIndex="3" GridPane.rowIndex="3" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p4_img07_07" GridPane.columnIndex="4" GridPane.rowIndex="3" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p4_img07_08" GridPane.columnIndex="5" GridPane.rowIndex="3" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p4_img07_09" GridPane.columnIndex="6" GridPane.rowIndex="3" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />

                        <!-- Fifth row -->
                        <ImageView fx:id="p4_img08_03" GridPane.columnIndex="0" GridPane.rowIndex="4" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p4_img08_04" GridPane.columnIndex="1" GridPane.rowIndex="4" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p4_img08_05" GridPane.columnIndex="2" GridPane.rowIndex="4" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p4_img08_06" GridPane.columnIndex="3" GridPane.rowIndex="4" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p4_img08_07" GridPane.columnIndex="4" GridPane.rowIndex="4" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p4_img08_08" GridPane.columnIndex="5" GridPane.rowIndex="4" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />
                        <ImageView fx:id="p4_img08_09" GridPane.columnIndex="6" GridPane.rowIndex="4" fitWidth="70" fitHeight="70" preserveRatio="true" GridPane.halignment="CENTER" GridPane.valignment="CENTER" />

                        <StackPane.margin>
                            <Insets bottom="103.0" left="1.0" right="1.0" top="103.0" />
                        </StackPane.margin>
                    </GridPane>
                </StackPane>

                <!-- Little Deck Panel - rimane come overlay -->
                <FlowPane fx:id="littleDeckFlowPane" alignment="CENTER" hgap="20.0" managed="false" styleClass="little-deck-container" vgap="20.0" visible="false" StackPane.alignment="CENTER">
                    <ImageView fx:id="visibleCard1" fitWidth="200" preserveRatio="true">
                        <FlowPane.margin>
                            <Insets bottom="25.0" left="25.0" right="25.0" top="25.0" />
                        </FlowPane.margin>
                    </ImageView>
                    <ImageView fx:id="visibleCard2" fitWidth="200" preserveRatio="true">
                        <FlowPane.margin>
                            <Insets bottom="25.0" left="25.0" right="25.0" top="25.0" />
                        </FlowPane.margin>
                    </ImageView>
                    <ImageView fx:id="visibleCard3" fitWidth="200" preserveRatio="true">
                        <FlowPane.margin>
                            <Insets bottom="25.0" left="25.0" right="25.0" top="25.0" />
                        </FlowPane.margin>
                    </ImageView>
                    <padding>
                        <Insets bottom="30.0" left="30.0" right="30.0" top="30.0" />
                    </padding>
                </FlowPane>
            </StackPane>
        </StackPane>
    </center>

    <right>
        <!-- Pannello destro con componente e controlli -->
        <VBox maxWidth="350" minWidth="300" spacing="20.0">
            <!-- Pannello dei controlli componente -->
            <VBox fx:id="componentControlsPanel" alignment="CENTER" managed="false" spacing="15.0" styleClass="component-controls" visible="false">
                <Label styleClass="controls-title" text="Component Controls" />

                <Button fx:id="rotateComponentButton" onAction="#handleRotateComponentButton" styleClass="component-control-button" text="Rotate Component" />
                <Button fx:id="releaseComponentButton" onAction="#handleReleaseComponentButton" styleClass="component-control-button" text="Release Component" />

                <padding>
                    <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                </padding>
            </VBox>

            <!-- Box componente -->
            <HBox fx:id="componentBox" alignment="CENTER" spacing="30.0" styleClass="component-display">
                <ImageView fx:id="focusComponentImage" />
                <padding>
                    <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                </padding>
            </HBox>
        </VBox>
    </right>

    <bottom>
        <HBox alignment="CENTER" spacing="15.0" styleClass="action-bar">
            <Button fx:id="pickRandomComponentButton" onAction="#handlePickRandomComponentButton" styleClass="action-button" text="Random Component" />
            <Button fx:id="visibleComponentButton" onAction="#handleVisibleComponentButton" styleClass="action-button" text="Visible Component" />

            <ComboBox fx:id="littleDeckComboBox" onAction="#handleLittleDeck" promptText="Watch a little deck" styleClass="game-combo-box">
                <items>
                    <FXCollections fx:factory="observableArrayList">
                        <Integer fx:value="1" />
                        <Integer fx:value="2" />
                        <Integer fx:value="3" />
                    </FXCollections>
                </items>
            </ComboBox>

            <padding>
                <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
            </padding>
        </HBox>
    </bottom>
</BorderPane>
